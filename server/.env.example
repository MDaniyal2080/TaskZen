# Database
DATABASE_URL="postgresql://username:password@localhost:5432/taskzen?schema=public"
# If using Neon: set DATABASE_URL to the pooled ("-pooler") URL and the next var to the direct URL
# Prisma will use directUrl for migrations
DATABASE_URL_UNPOOLED="postgresql://username:password@localhost:5432/taskzen?schema=public"

# JWT Authentication
JWT_SECRET="your-super-secret-jwt-key-change-this-in-production"
JWT_EXPIRES_IN="7d"

# Server Configuration
PORT=3001
NODE_ENV=development

# CORS
CORS_ORIGIN="http://localhost:3000"
FRONTEND_URL="http://localhost:3000"
CLIENT_URL="http://localhost:3000"

# Email Configuration (Nodemailer)
SMTP_HOST="smtp.gmail.com"
SMTP_PORT=587
SMTP_USER="your-email@gmail.com"
SMTP_PASS="your-app-specific-password"
EMAIL_FROM="TaskZen <noreply@taskzen.com>"

# Payment Gateway (Stripe)
STRIPE_SECRET_KEY="sk_test_your_stripe_secret_key"
STRIPE_WEBHOOK_SECRET="whsec_your_webhook_secret"

# Redis (for rate limiting and caching)
REDIS_URL="redis://localhost:6379"
# Optionally specify Redis connection via discrete vars (used when REDIS_URL is set)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# File Upload
MAX_FILE_SIZE=5242880
UPLOAD_DIR="./uploads"
UPLOAD_PATH="./uploads"

# AWS S3 (for presigned uploads)
AWS_ACCESS_KEY_ID="your-aws-access-key-id"
AWS_SECRET_ACCESS_KEY="your-aws-secret-access-key"
AWS_REGION="us-east-1"
AWS_S3_BUCKET="your-bucket-name"
# Optional: Expiry for presigned URLs (in seconds). Default 900 (15m)
AWS_S3_PRESIGN_EXPIRES=900
# Optional: If using CloudFront or custom domain for public URLs
# Example: https://cdn.taskzen.com or https://d111111abcdef8.cloudfront.net
AWS_S3_BASE_URL=""

# Admin Configuration
ADMIN_EMAIL="admin@taskzen.com"
ADMIN_PASSWORD="changethisinproduction"

# Admin Health
# If true, /admin/health will perform a DB ping. Defaults: dev=true, production=false when unset.
ADMIN_HEALTH_DB_PING=

# Feature Flags
ENABLE_MAINTENANCE_MODE=false
ENABLE_RATE_LIMITING=true
ENABLE_EMAIL_NOTIFICATIONS=true

# API Docs
# Set to true to expose Swagger UI in production at /api/docs
ENABLE_SWAGGER=false

# Rate Limiting (optional)
# Global limits per-node (tune behind a gateway/edge)
RATE_LIMIT_TTL=60
RATE_LIMIT_LIMIT=100
# Search-specific limits
SEARCH_RATE_LIMIT_TTL=60
SEARCH_RATE_LIMIT_LIMIT=30

# Analytics
GOOGLE_ANALYTICS_ID="G-XXXXXXXXXX"
MIXPANEL_TOKEN="your-mixpanel-token"

# Admin Analytics
# TTL for cached admin analytics responses in milliseconds.
# Clamped by code to 5000â€“60000. Default 20000.
# Increase in production if analytics traffic is high to reduce DB load.
ADMIN_ANALYTICS_CACHE_TTL_MS=20000

# Security
BCRYPT_ROUNDS=10
SESSION_SECRET="your-session-secret-change-this"

# API Keys (optional)
OPENAI_API_KEY="sk-your-openai-api-key"
CLOUDINARY_URL="cloudinary://api_key:api_secret@cloud_name"

# Startup Hardening (optional)
# Max time to wait for DB connection on startup before failing (ms)
DB_CONNECT_TIMEOUT_MS=8000
# If true, server will start even if DB is unreachable (degraded mode for local dev)
ALLOW_BOOT_WITHOUT_DB=false
# Max time to wait when fetching system settings per request (ms)
SETTINGS_FETCH_TIMEOUT_MS=1000
